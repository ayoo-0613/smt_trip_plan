# For first leg (index 0)
            s.assert_and_track(Or(variables['flight'][0], variables['self_driving'][0]), 'first leg must be flight or self-driving')
            s.assert_and_track(Not(And(variables['flight'][0], variables['self_driving'][0])), 'first leg cannot be both flight and self-driving')
            s.assert_and_track(Not(variables['taxi'][0]), 'first leg cannot be taxi')
            
            # For second leg (index 1)
            s.assert_and_track(Or(variables['flight'][1], variables['self_driving'][1]), 'second leg must be flight or self-driving')
            s.assert_and_track(Not(And(variables['flight'][1], variables['self_driving'][1])), 'second leg cannot be both flight and self-driving')
            s.assert_and_track(Not(variables['taxi'][1]), 'second leg cannot be taxi')
            
            # Global constraint: if flight is used in leg 0 or 1, self-driving cannot be used in leg 0 or 1
            s.assert_and_track(Implies(Or(variables['flight'][0], variables['flight'][1]), Not(Or(variables['self_driving'][0], variables['self_driving'][1]))), 'no self-driving if flight is used')